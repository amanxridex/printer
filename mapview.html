<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aarambh AI - Map View | Vrindavan Real Estate</title>

    <!-- Leaflet CSS (Real Map) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="mapstyle.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar-map">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <div class="logo-icon">A</div>
                <div class="logo-text">
                    <span class="logo-main">AARAMBH</span>
                    <span class="logo-sub">MAP VIEW</span>
                </div>
            </a>

            <div class="map-controls">
                <div class="search-map">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search location in Vrindavan..." id="mapSearch">
                </div>

                <div class="filter-chips-map">
                    <button class="chip-map active" data-filter="all">
                        <i class="fas fa-layer-group"></i> All
                    </button>
                    <button class="chip-map" data-filter="apartment">
                        <i class="fas fa-building"></i> Apartments
                    </button>
                    <button class="chip-map" data-filter="villa">
                        <i class="fas fa-home"></i> Villas
                    </button>
                    <button class="chip-map" data-filter="plot">
                        <i class="fas fa-map"></i> Plots
                    </button>
                    <button class="chip-map" data-filter="commercial">
                        <i class="fas fa-store"></i> Commercial
                    </button>
                </div>
            </div>

            <div class="nav-actions">
                <button class="btn-list-view" onclick="window.location.href='index.html'">
                    <i class="fas fa-list"></i>
                    List View
                </button>
                <button class="btn-list-view" onclick="window.location.href='leads.html'" style="margin-right: 1rem;">
                    <i class="fas fa-users"></i>
                    Leads
                </button>
                <button class="btn-add" onclick="openAddModal()">
                    <i class="fas fa-plus"></i>
                    Add Project
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Map Container -->
    <div class="map-wrapper">
        <!-- Sidebar Projects Panel -->
        <div class="projects-sidebar" id="projectsSidebar">
            <div class="sidebar-header">
                <h3><i class="fas fa-map-marker-alt"></i> Projects Near You</h3>
                <span class="project-count" id="projectCount">6 Projects</span>
            </div>

            <div class="projects-list-map" id="projectsListMap">
                <!-- Projects injected by JS -->
            </div>
        </div>

        <!-- The Actual Map -->
        <div id="vrindavanMap"></div>

        <!-- Map Overlay Controls -->
        <div class="map-overlays">
            <!-- Zoom Controls -->
            <div class="zoom-controls">
                <button onclick="zoomInMap()" title="Zoom In">
                    <i class="fas fa-plus"></i>
                </button>
                <button onclick="zoomOutMap()" title="Zoom Out">
                    <i class="fas fa-minus"></i>
                </button>
                <button onclick="resetMap()" title="Reset View">
                    <i class="fas fa-compress-arrows-alt"></i>
                </button>
            </div>

            <!-- Layer Toggle -->
            <div class="layer-toggle">
                <button class="layer-btn active" onclick="toggleLayer('satellite')">
                    <i class="fas fa-satellite"></i>
                </button>
                <button class="layer-btn" onclick="toggleLayer('terrain')">
                    <i class="fas fa-mountain"></i>
                </button>
                <button class="layer-btn" onclick="toggleLayer('traffic')">
                    <i class="fas fa-traffic-light"></i>
                </button>
            </div>

            <!-- Heatmap Toggle -->
            <div class="heatmap-control">
                <label class="toggle-switch">
                    <input type="checkbox" id="heatmapToggle" onchange="toggleHeatmap()">
                    <span class="slider"></span>
                </label>
                <span>Price Heatmap</span>
            </div>
        </div>

        <!-- Project Detail Popup (Hidden by default) -->
        <div class="project-detail-panel" id="detailPanel">
            <button class="close-detail" onclick="closeDetailPanel()">
                <i class="fas fa-times"></i>
            </button>
            <div class="detail-content" id="detailContent">
                <!-- Detail content injected -->
            </div>
        </div>

        <!-- Top India Ads -->
        <div class="top-india-ads" id="topIndiaAds">
            <!-- Ads injected here by JS -->
        </div>
    </div>

    <!-- Quick Stats Bar -->
    <div class="map-stats-bar">
        <div class="stat-item">
            <i class="fas fa-eye"></i>
            <span>Live Tracking</span>
        </div>
        <div class="stat-item">
            <span class="stat-num" id="mapStatTotal">47</span>
            <span>Projects Mapped</span>
        </div>
        <div class="stat-item">
            <span class="stat-num" id="mapStatNew">12</span>
            <span>New This Week</span>
        </div>
        <div class="stat-item">
            <span class="price-avg" id="mapStatPrice">₹45L</span>
            <span>Avg Price</span>
        </div>
    </div>

    <!-- Add Project Modal -->
    <div class="modal-map" id="addModal">
        <div class="modal-overlay" onclick="closeAddModal()"></div>
        <div class="modal-content-map">
            <div class="modal-header">
                <h3><i class="fas fa-map-pin"></i> Add Project Location</h3>
                <button class="close-btn" onclick="closeAddModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <form onsubmit="submitProjectLocation(event)">
                <div class="form-group">
                    <label>Project Name</label>
                    <input type="text" placeholder="e.g., Radhe Krishna Residency" required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Type</label>
                        <select required>
                            <option value="">Select Type</option>
                            <option value="apartment">Apartment</option>
                            <option value="villa">Villa</option>
                            <option value="plot">Plot</option>
                            <option value="commercial">Commercial</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Price Range</label>
                        <input type="text" placeholder="₹ 45L - ₹ 65L">
                    </div>
                </div>

                <div class="location-picker">
                    <label>Pick Location on Map</label>
                    <div class="mini-map" id="miniMap"></div>
                    <p class="hint">Click on the mini map to set exact location</p>
                </div>

                <div class="coordinates-display">
                    <div class="coord">
                        <span>Lat:</span>
                        <input type="text" id="latInput" readonly placeholder="27.5658">
                    </div>
                    <div class="coord">
                        <span>Lng:</span>
                        <input type="text" id="lngInput" readonly placeholder="77.6762">
                    </div>
                </div>

                <button type="submit" class="btn-submit-map">
                    <i class="fas fa-check"></i>
                    Confirm Location & Add
                </button>
            </form>
        </div>
    </div>

    <!-- Region Selection Modal -->
    <div class="modal-map" id="regionModal">
        <div class="modal-overlay" onclick="closeRegionModal()"></div>
        <div class="modal-content-map region-content">
            <div class="modal-header">
                <h3><i class="fas fa-globe-asia"></i> Choose City to Focus</h3>
                <button class="close-btn" onclick="closeRegionModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="region-grid">
                <button class="region-btn" onclick="focusRegion('vrindavan')">
                    <i class="fas fa-om"></i> Vrindavan
                </button>
                <button class="region-btn" onclick="focusRegion('noida')">
                    <i class="fas fa-city"></i> Noida / Delhi NCR
                </button>
                <button class="region-btn" onclick="focusRegion('gurugram')">
                    <i class="fas fa-building"></i> Gurugram
                </button>
                <button class="region-btn" onclick="focusRegion('mumbai')">
                    <i class="fas fa-water"></i> Mumbai
                </button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast-map" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMsg">Project added to map!</span>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>
    <script src="mapscript.js"></script>
</body>

</html>